这篇文章主要详解讲解 数据-变量-内存的详细意义，同时理一理它们之间的关系。

- 什么是数据？
  - 我们可以这样理解：存储于内存中代表特定信息的‘东东’。本质就是0101..二进制
  - 具有可读和可传递的基本特性
  - 万物（一切）皆数据，函数也是数据
  - 程序中所有操作的目标：数据
    - 算术运算
    - 逻辑运算
    - 赋值
    - 调用参数传参
    - 函数运行，类似:foo () 这里可以把()当做运行标识符操作

------

- 什么是内存？
  - 内存条通电后产生的存储空间（临时的）
  - 产生和死亡：内存条（集成电路板）===>通电===>产生一定容量的存储空间===>存储各种数据===>断电===>内存全部消失
  - 内存的空间是临时的，而硬盘的空间是持久的，但是内存的效率高于硬盘，各有优缺
  - 分配内存：声明变量和函数或创建对象的时候，JS引擎会自动为此分配一定大小的内存来存放对应的数据
  - 释放内存：清空内存中的数据，标识内存可以再分配使用（内存不释放就不能复用）
    - 自动释放：栈空间的局部变量
    - 垃圾回调器回调：堆空间的垃圾对象
  - 一块内存包含2个数据
    - 内存存储的数据（一般数据/地址数据）
    - 内存地址值数据
  - 内存分类
    - 栈：全局变量，局部变量（这些空间较小）
    - 堆：对象（空间较大，还可以用于存放代码等）

------

- 什么是变量？
  - 值可以变化的量，由变量名与变量值组成
  - 一个变量对应一块小内存，变量名用来查找到内存，变量值就是内存中保存的内容

------

- 内存-数据-变量三者之间的关系
  - 内存是一个容器，用于存储程序运行需要操作的数据
  - 变量是内存的标识，我们通过变量找到相应的内存，进而操作（读/写）内存中的数据

简单代码演示:



```csharp
 var a1 = 3   //这个就是基础数据类型
  var a2 = a1 + 4           //这里的al就是3，然后进行算术计算
  var a3 = {}           //这个就是引用类型，a3里面是对象的地址
  a3.name = 'Tom'       //name相当于对象中TOM这个值的标识名
```

------

# 关于赋值和内存的问题

这里先扔出一个问题：

- 问题：var a=xxx，a内存中保存的是什么？
  - xxx是一个基本数据
  - xxx是一个对象
  - xxx是一个变量

简单代码演示:



```jsx
var a = 3      //a内存中保存的就是3
  a = function () {

  }       ///a内存保存的是对象的地址

var b = 'abc'    //b内存中保存的是‘abc’
a = b                   //a内存保存的就是b内存的内容，即‘abc’
b = []                  //b内存保存的是array的地址
a = b         //a内存保存的就是b内存的内容，即array的地址
```

------

# 关于引用变量赋值问题

- 关于引用变量赋值问题
  - 2个引用变量指向同一个对象，通过一个引用变量修改对象内部数据，另一个引用变量也看得见
  - 2个引用变量指向同一个对象，让一个引用变量指向另一个对象，另一个引用变量还是指向原来的对象



```jsx
  //1. 2个引用变量指向同一个对象, 通过一个引用变量修改对象内部数据, 另一个引用变量也看得见
  var obj1 = {}
  var obj2 = obj1
  obj2.name = 'Tom'
  console.log(obj1.name)   //输出Tom
  function f1(obj) {
    obj.age = 12
  }
  f1(obj2)
  console.log(obj1.age)
//输出 12

  //2. 2个引用变量指向同一个对象,让一个引用变量指向另一个对象, 另一个引用变量还是指向原来的对象
  var obj3 = {name: 'Tom'}
  var obj4 = obj3
  obj3 = {name: 'JACK'}
  console.log(obj4.name)   //输出 Tom
```

------

# 关于数据传递问题

- 问题：在js调用函数时传递变量参数时，是值传递还是引用传递
  - 只有值传递，没有引用传递，传递的都是变量的值，只是这个值可能是基本数据，也可能是地址（引用）数据
  - 如果后一种看成是引用传递，那值传递和引用传递都可以有

简单代码演示:



```jsx
  function f(a) {
    console.log(a)
  }
  var n = 4
  f(n) //传递的是n的值 --->值传递
//输出4

  function f2(a) {
    a.name = 'atguigu'
  }
  n = {}
  f2(n) // 传递的是n指向的对象 ---> 引用传递   ???  传的智商n里面的内容  也就是{}的地址
  console.log(n.name)
  //输出atguigu
```

------

# JS引擎如何管理内存？

- 内存生命周期
  - 分配需要的内存
  - 使用分配到的内存
  - 不需要时将其释放/归还
- 释放内存
  - 为执行函数分配的栈空间内存：函数执行完自动释放
  - 存储对象的堆空间内存：当内存没有引用指向时，对象成为垃圾对象，垃圾回收器后面就会回收释放此内存



```jsx
  var obj = {}
  obj = null // ?
 //内存还有obj，并且它的值为null

  function fn () {
    var a = 3
    var b = {}
  }
  fn() // ?
  //内存中已经没有a和b了  但是有fn
```


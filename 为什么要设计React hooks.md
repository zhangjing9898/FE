# åŸºç¡€çŸ¥è¯†



React-Hooks è¿™ä¸ªä¸œè¥¿æ¯”è¾ƒç‰¹åˆ«ï¼Œè¿™èƒŒåå…¶å®æ¶‰åŠå¯¹**ç±»ç»„ä»¶**å’Œ**å‡½æ•°ç»„ä»¶**ä¸¤ç§ç»„ä»¶å½¢å¼çš„æ€è€ƒå’Œä¾§é‡ã€‚



## ç±»ç»„ä»¶ï¼ˆClass Componentï¼‰



åŸºäº ES6 Class è¿™ç§å†™æ³•ï¼Œé€šè¿‡ç»§æ‰¿ React.Component å¾—æ¥çš„ React ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå…¸å‹çš„ç±»ç»„ä»¶



```
class dongmaoTest extends React.Component {
  // åˆå§‹åŒ–ç±»ç»„ä»¶çš„ state
  state = {
    text: ''
  }

  // ç¼–å†™ç”Ÿå‘½å‘¨æœŸæ–¹æ³• didMount
  componentDidMount() {
    // çœç•¥ä¸šåŠ¡é€»è¾‘
  }

  // ç¼–å†™è‡ªå®šä¹‰çš„å®ä¾‹æ–¹æ³•
  changeText = newText => {
    // æ›´æ–° state
    this.setState({
      text: newText
    })
  }

  // ç¼–å†™ç”Ÿå‘½å‘¨æœŸæ–¹æ³• render
  render() {
    return (
      <div className="demoClass">
        <p>{this.state.text}</p>
        <button onClick={this.changeText}>ç‚¹æˆ‘</button>
      </div>
    )
  }
}
```

##  

## å‡½æ•°ç»„ä»¶ï¼ˆFunction Componentï¼‰



#### å‡½æ•°ç»„ä»¶ä¹Ÿå¯ä»¥å«åšæ— çŠ¶æ€ç»„ä»¶



é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯**ä»¥å‡½æ•°çš„å½¢æ€**å­˜åœ¨çš„ç»„ä»¶ã€‚æ—©æœŸæ²¡æœ‰ React-Hooks ï¼Œå‡½æ•°ç»„ä»¶å†…éƒ¨æ˜¯æ— æ³•å®šä¹‰å’Œç»´æŠ¤ stateï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç§°ä¸ºâ€œæ— çŠ¶æ€ç»„ä»¶â€ã€‚



```
const dongmaoTest = (props) => {
  const { text } = props
  return (
    <div className="demoFunction">
      <p>{`æ–‡æœ¬å†…å®¹æ˜¯ï¼š[${text}]`}</p>
    </div>
  );
}
```



## å¯¹æ¯” ç±»å’Œå‡½æ•°ç»„ä»¶



ç®€å•ç½—åˆ—ä¸€ä¸‹ï¼š



- ç±»ç»„ä»¶éœ€è¦ç»§æ‰¿ classï¼Œå‡½æ•°ç»„ä»¶ä¸éœ€è¦ï¼›
- ç±»ç»„ä»¶å¯ä»¥è®¿é—®ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå‡½æ•°ç»„ä»¶ä¸èƒ½ï¼›
- ç±»ç»„ä»¶ä¸­å¯ä»¥è·å–åˆ°å®ä¾‹åŒ–åçš„ thisï¼Œå¹¶åŸºäºè¿™ä¸ª this åšå„ç§å„æ ·çš„äº‹æƒ…ï¼Œå‡½æ•°ç»„ä»¶ä¸å¯ä»¥ï¼›
- ç±»ç»„ä»¶ä¸­å¯ä»¥å®šä¹‰å¹¶ç»´æŠ¤ stateï¼Œå‡½æ•°ç»„ä»¶ä¸å¯ä»¥ï¼›
- ... and so on



# æ·±å…¥



### ç†è§£ç±»ç»„ä»¶



**åŒ…è£¹åœ¨é¢å‘å¯¹è±¡æ€æƒ³ä¸‹çš„â€œé‡è£…æˆ˜èˆ°â€**



ç±»ç»„ä»¶æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³çš„ä¸€ç§è¡¨å¾ï¼Œé¢å‘å¯¹è±¡2å¤§ç‰¹å¾ï¼š



- å°è£…ï¼šå°†ä¸€ç±»å±æ€§å’Œæ–¹æ³•ï¼Œâ€œèšæ‹¢æŠ½è±¡â€åˆ°ä¸€ä¸ª Class é‡Œå»ã€‚
- ç»§æ‰¿ï¼šæ–°çš„ Class å¯ä»¥é€šè¿‡ç»§æ‰¿ç°æœ‰ Classï¼Œå®ç°å¯¹æŸä¸€ç±»å±æ€§å’Œæ–¹æ³•çš„å¤ç”¨ã€‚



#### ä¸€ä¸ªä¾‹å­ğŸŒ°



```
class dongmaoTest extends React.Component {
  // åˆå§‹åŒ–ç±»ç»„ä»¶çš„ state
  state = {
    text: ''
  }

  // ç¼–å†™ç”Ÿå‘½å‘¨æœŸæ–¹æ³• didMount
  componentDidMount() {
    // çœç•¥ä¸šåŠ¡é€»è¾‘
  }

  // ç¼–å†™è‡ªå®šä¹‰çš„å®ä¾‹æ–¹æ³•
  changeText = newText => {
    // æ›´æ–° state
    this.setState({
      text: newText
    })
  }

  // ç¼–å†™ç”Ÿå‘½å‘¨æœŸæ–¹æ³• render
  render() {
    return (
      <div className="demoClass">
        <p>{this.state.text}</p>
        <button onClick={this.changeText}>ç‚¹æˆ‘</button>
      </div>
    )
  }
}
```



ç±»ç»„ä»¶å†…éƒ¨æœ‰ç›¸å½“å¤šçš„â€œå·²æœ‰çš„ä¸œè¥¿â€ç­‰ç€ä½ å»ä½¿ç”¨ï¼Œstate å’Œç”Ÿå‘½å‘¨æœŸå°±æ˜¯è¿™äº›â€œç°æˆä¸œè¥¿â€ä¸­çš„å…¸å‹ã€‚å¦‚ä½•å¾—åˆ°è¿™äº›ä¸œè¥¿ï¼Ÿä½ åªéœ€è¦**ç»§æ‰¿**ä¸€ä¸ª React.Component



React ç±»ç»„ä»¶ï¼Œå®ƒæä¾›äº†å¤šå°‘ä¸œè¥¿ï¼Œä½ å°±éœ€è¦å­¦å¤šå°‘ä¸œè¥¿ã€‚å‡å¦‚èƒŒä¸ä½ç”Ÿå‘½å‘¨æœŸï¼Œä½ çš„ç»„ä»¶é€»è¾‘é¡ºåºå¤§æ¦‚ç‡ä¼šå˜æˆä¸€å›¢ç³Ÿã€‚**â€œå¤§è€Œå…¨â€çš„èƒŒåï¼Œæ˜¯ä¸å¯å¿½è§†çš„å­¦ä¹ æˆæœ¬**ã€‚è¿™ä¹Ÿæ˜¯ç±»ç»„ä»¶çš„ä¸€ä¸ªä¸ä¾¿ï¼Œ**å®ƒå¤ªé‡äº†**ï¼Œå¯¹äºè§£å†³è®¸å¤šé—®é¢˜æ¥è¯´ï¼Œç¼–å†™ä¸€ä¸ªç±»ç»„ä»¶å®åœ¨æ˜¯ä¸€ä¸ªè¿‡äºå¤æ‚çš„å§¿åŠ¿ã€‚å¤æ‚çš„å§¿åŠ¿å¿…ç„¶å¸¦æ¥é«˜æ˜‚çš„ç†è§£æˆæœ¬ã€‚



ç”±äºå¼€å‘è€…ç¼–å†™çš„é€»è¾‘åœ¨**å°è£…**åæ˜¯å’Œç»„ä»¶ç²˜åœ¨ä¸€èµ·çš„ï¼Œè¿™å°±ä½¿å¾—ç±»ç»„ä»¶å†…éƒ¨çš„é€»è¾‘éš¾ä»¥å®ç°æ‹†åˆ†å’Œå¤ç”¨ã€‚



å¦‚æœä½ æƒ³è¦æ‰“ç ´è¿™ä¸ªåƒµå±€ï¼Œåˆ™éœ€è¦è¿›ä¸€æ­¥å­¦ä¹ æ›´åŠ å¤æ‚çš„è®¾è®¡æ¨¡å¼ï¼ˆæ¯”å¦‚é«˜é˜¶ç»„ä»¶ã€Render Props ç­‰ï¼‰ï¼Œç”¨æ›´é«˜çš„å­¦ä¹ æˆæœ¬æ¥äº¤æ¢ä¸€ç‚¹ç‚¹ç¼–ç çš„çµæ´»åº¦ã€‚è®©äººå¤´ç§ƒ



### ç†è§£å‡½æ•°ç»„ä»¶



**å‘¼åº” React è®¾è®¡æ€æƒ³çš„ è½»å·§ã€ç®€æ´**



```
const dongmaoTest = props => {
  const { text } = props

  const showAlert = () => {
    alert(`æˆ‘æ¥æ”¶åˆ°çš„æ–‡æœ¬æ˜¯${text}`)
  }

  return (
    <div className="demoFunction">
      <p>{`function ç»„ä»¶æ‰€æ¥æ”¶åˆ°çš„æ¥è‡ªå¤–ç•Œçš„æ–‡æœ¬å†…å®¹æ˜¯ï¼š[${text}]`}</p>

      <button onClick={showAlert}>ç‚¹å‡»å¼¹çª—</button>
    </div>
  )
}
```



ç›¸æ¯”äºç±»ç»„ä»¶ï¼Œå‡½æ•°ç»„ä»¶è‚‰çœ¼å¯è§çš„ç‰¹è´¨è‡ªç„¶åŒ…æ‹¬è½»é‡ã€çµæ´»ã€æ˜“äºç»„ç»‡å’Œç»´æŠ¤ã€è¾ƒä½çš„å­¦ä¹ æˆæœ¬ç­‰



æ¨èä¸€ç¯‡[æ–‡ç« ](https://overreacted.io/how-are-function-components-different-from-classes/) 



æ€»ç»“ä¸€ä¸‹ï¼Œæ–‡ç« çš„æ ¸å¿ƒç‚¹æ˜¯ï¼š**å‡½æ•°ç»„ä»¶ä¼šæ•è· render å†…éƒ¨çš„çŠ¶æ€ï¼Œè¿™æ˜¯ä¸¤ç±»ç»„ä»¶æœ€å¤§çš„ä¸åŒã€‚**è¿™å¥è¯å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œä¸‹é¢ä¼šæœ‰ä¸€ä¸ªä¾‹å­æ¥ä¸“é—¨è®²



#### Reactå…¬å¼



**React ç»„ä»¶æœ¬èº«çš„å®šä½å°±æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªåƒè¿›æ•°æ®ã€åå‡º UI çš„å‡½æ•°**

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2020/png/129546/1604564166549-06ce30a2-dd7d-4db1-bb62-5246b3bebe89.png)



React çš„æ•°æ®åº”è¯¥æ€»æ˜¯ç´§ç´§åœ°å’Œæ¸²æŸ“ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œè€Œç±»ç»„ä»¶åšä¸åˆ°è¿™ä¸€ç‚¹ã€‚



ä¸ºä»€ä¹ˆç±»ç»„ä»¶åšä¸åˆ°ï¼Ÿ



å‚è€ƒä¸Šé¢æ–‡ç« ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å…ˆçœ‹åŠŸèƒ½çš„å†…éƒ¨å®ç°



```
import React from 'react';

class ProfilePage extends React.Component {
  showMessage = () => {
    alert('Followed ' + this.props.user);
  };

  handleClick = () => {
    setTimeout(this.showMessage, 3000);
  };

  render() {
    return <button onClick={this.handleClick}>Follow</button>;
  }
}

export default ProfilePage;
```



[åœ¨çº¿Demo](https://codesandbox.io/s/pjqnl16lm7?file=/src/index.js)



å°è¯•ç‚¹å‡»åŸºäºç±»ç»„ä»¶å½¢å¼ç¼–å†™çš„ ProfilePage æŒ‰é’®ï¼Œç‚¹å‡»çš„æ—¶å€™æ˜¯Danï¼Œç‚¹å‡»å 3s å†…æŠŠç”¨æˆ·åˆ‡æ¢ä¸º Sophie



è¿™æ˜¯class

![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2020/png/129546/1604564580207-a1f6a98b-46f4-4a96-b3eb-be9b2eb4f169.png?x-oss-process=image%2Fresize%2Cw_1500)



è¿™æ˜¯function



![image.png](https://intranetproxy.alipay.com/skylark/lark/0/2020/png/129546/1604564640538-2b52f843-2e12-4b86-88eb-3e51327286e4.png?x-oss-process=image%2Fresize%2Cw_1500)



æ˜æ˜æˆ‘ä»¬æ˜¯åœ¨ Dan çš„ä¸»é¡µç‚¹å‡»çš„å…³æ³¨ï¼Œç»“æœå´æç¤ºäº†â€œFollowed Sophieâ€



> **è™½ç„¶ props æœ¬èº«æ˜¯ä¸å¯å˜çš„ï¼Œä½† this å´æ˜¯å¯å˜çš„ï¼Œthis ä¸Šçš„æ•°æ®æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„**ï¼Œthis.props çš„è°ƒç”¨æ¯æ¬¡éƒ½ä¼šè·å–æœ€æ–°çš„ propsï¼Œè€Œè¿™æ­£æ˜¯ React ç¡®ä¿æ•°æ®å®æ—¶æ€§çš„ä¸€ä¸ªé‡è¦æ‰‹æ®µã€‚
>
> 
>
> è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œ**æˆ‘ä»¬é€šè¿‡ setTimeout å°†é¢„æœŸä¸­çš„æ¸²æŸ“æ¨è¿Ÿäº† 3sï¼Œæ‰“ç ´äº† this.props å’Œæ¸²æŸ“åŠ¨ä½œä¹‹é—´çš„è¿™ç§æ—¶æœºä¸Šçš„å…³è”**ï¼Œè¿›è€Œå¯¼è‡´æ¸²æŸ“æ—¶æ•è·åˆ°çš„æ˜¯ä¸€ä¸ªé”™è¯¯çš„ã€ä¿®æ”¹åçš„ this.props





å‡½æ•°ç»„ä»¶ä¼šæ•è· render å†…éƒ¨çš„çŠ¶æ€ï¼Œè¿™å¥è¯ä¹Ÿå°±æ˜¯ï¼š**å‡½æ•°ç»„ä»¶çœŸæ­£åœ°æŠŠæ•°æ®å’Œæ¸²æŸ“ç»‘å®šåˆ°äº†ä¸€èµ·**

**
**

## æ€»ç»“



å‡½æ•°ç»„ä»¶æ¯”èµ·ç±»ç»„ä»¶â€œå°‘â€äº†å¾ˆå¤šä¸œè¥¿ï¼Œæ¯”å¦‚ç”Ÿå‘½å‘¨æœŸã€å¯¹ state çš„ç®¡ç†ç­‰ã€‚è¿™å°±ç»™å‡½æ•°ç»„ä»¶çš„ä½¿ç”¨å¸¦æ¥äº†éå¸¸å¤šçš„å±€é™æ€§ã€‚



React-Hooks çš„å‡ºç°ï¼Œå°±æ˜¯ä¸ºäº†å¸®åŠ©å‡½æ•°ç»„ä»¶è¡¥é½è¿™äº›ï¼ˆç›¸å¯¹äºç±»ç»„ä»¶æ¥è¯´ï¼‰ç¼ºå¤±çš„èƒ½åŠ›
